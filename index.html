<!DOCTYPE html>
<html>
<head>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W89PBMW');</script>
<!-- End Google Tag Manager -->

<script>
window.dataLayer = window.dataLayer || []; 
const params = new URLSearchParams(window.location.search)
for (var key of params.keys()) {
	window.dataLayer.push({ 
 	[key]: params.get(key) 
  });
}
</script>
</head>


<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W89PBMW"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<h1>Test Page</h1>

<form action="http://httpbin.org/get" method="GET">
<div id="sendParams">
</div>
<input type="submit" />
</form>
<script>
var myDiv = document.getElementById("sendParams");
for (var i = 0, l = window.dataLayer.length; i < l; i++) {
  var items = myarray[i];
  var keys = Object.keys(items);
  for (var j = 0, k = keys.length; j < k; j++) {
    console.log('this is a key-> ' + keys[j] + ' & this is its value-> ' + items[keys[j]]);
    myDiv.innerHTML += "<input type=\"hidden\" name=\""+keys[j]+"\" value=\""+items[keys[j]]+"\" />";
  }
}
</script>

</body>
</html>
